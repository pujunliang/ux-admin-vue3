import{g as L,a as q,c as B,b as E,_ as A,u as G,d as H,f as M,h as P}from"./utils-8a0e21cb.js";import{T as j}from"./index-fd7aca7f.js";import{g as z,s as J,I as K}from"./render-a551338b.js";import{_ as O}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-495e4281.js";import{d as V,aM as w,bo as U,r as x,o as _,c as v,F as T,f as S,a as n,t as D,G as I,b as i,w as p,ar as R,aP as Q,h as W,aK as C,u as N,e as m,bJ as $}from"./index-56d49eb9.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-563a259b.js";const Y={class:"select-filter"},Z={class:"select-filter-item-title"},ee={key:0,class:"select-filter-notData"},ae={class:"select-filter-list"},le=["onClick"],te=V({__name:"index",props:{data:{default:()=>[]},defaultValues:{default:()=>({})}},emits:["change"],setup(F,{emit:t}){const f=F,l=w({});U(()=>f.defaultValues,()=>{f.data.forEach(e=>{e.multiple?l.value[e.key]=f.defaultValues[e.key]??[""]:l.value[e.key]=f.defaultValues[e.key]??""})},{deep:!0,immediate:!0});const b=(e,r)=>{if(!e.multiple)l.value[e.key]!==r.value&&(l.value[e.key]=r.value);else if(e.options[0].value===r.value&&(l.value[e.key]=[r.value]),l.value[e.key].includes(r.value)){let y=l.value[e.key].findIndex(k=>k===r.value);l.value[e.key].splice(y,1),l.value[e.key].length==0&&(l.value[e.key]=[e.options[0].value])}else l.value[e.key].push(r.value),l.value[e.key].includes(e.options[0].value)&&l.value[e.key].splice(0,1);t("change",l.value)};return(e,r)=>{const y=x("el-icon"),k=x("el-scrollbar");return _(),v("div",Y,[(_(!0),v(T,null,S(e.data,o=>(_(),v("div",{key:o.key,class:"select-filter-item"},[n("div",Z,[n("span",null,D(o.title)+" ：",1)]),o.options.length?I("",!0):(_(),v("span",ee," 暂无数据 ~ ")),i(k,null,{default:p(()=>[n("ul",ae,[(_(!0),v(T,null,S(o.options,u=>(_(),v("li",{key:u.value,class:R({active:u.value===l.value[o.key]||Array.isArray(l.value[o.key])&&l.value[o.key].includes(u.value)}),onClick:g=>b(o,u)},[Q(e.$slots,"default",{row:u},()=>[u.icon?(_(),W(y,{key:0},{default:p(()=>[n("i",{class:R(u.icon)},null,2)]),_:2},1024)):I("",!0),n("span",null,D(u.label),1)],!0)],10,le))),128))])]),_:2},1024)]))),128))])}}});const se=X(te,[["__scopeId","data-v-fbded426"]]),re={class:"main-box"},ne={class:"table-box"},ue={class:"card mb10 pt0 pb0"},ie=n("i",{class:"ri-add-line"},null,-1),oe=n("i",{class:"ri-radio-button-line"},null,-1),ce=n("i",{class:"ri-eye-line"},null,-1),de=n("i",{class:"ri-edit-2-line"},null,-1),pe=n("i",{class:"ri-delete-bin-line"},null,-1),_e=V({name:"useSelectFilter"}),ge=V({..._e,setup(F){const t=w(),f=C([{type:"radio",label:"单选",width:60},{type:"index",label:"#",width:80},{prop:"username",label:"用户姓名",width:120},{prop:"gender",label:"性别",width:120,sortable:!0,enum:L(),render:z},{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",width:120,sortable:!0,tag:!0,enum:q(),render:a=>J(a,!1,null)},{prop:"createTime",label:"创建时间",width:180,sortable:!0},{prop:"operation",label:"操作",width:230,fixed:"right"}]),l=C([{title:"用户状态(单)",key:"workStatus",options:[{label:"全部",value:""},{label:"在职",value:"1",icon:"ri-user-line"},{label:"待培训",value:"2",icon:"ri-notification-line"},{label:"待上岗",value:"3",icon:"ri-time-line"},{label:"已离职",value:"4",icon:"ri-close-circle-line"},{label:"已退休",value:"5",icon:"ri-check-line"}]},{title:"用户角色(多)",key:"userRole",multiple:!0,options:[]}]),b=w({userStatus:"2",userRole:["1","3"]}),e=a=>{$.success("请注意查看请求参数变化 🤔"),t.value.pageable.pageNum=1,b.value=a},r=C({departmentId:["11"]}),y=a=>{$.success("请注意查看请求参数变化 🤔"),t.value.pageable.pageNum=1,r.departmentId=a},k=()=>{var a,s,c,d;t.value.radio=(a=t.value)==null?void 0:a.tableData[3].id,(d=(s=t.value)==null?void 0:s.element)==null||d.setCurrentRow((c=t.value)==null?void 0:c.tableData[3])};U(()=>{var a;return(a=t.value)==null?void 0:a.radio},()=>{var a,s;return((a=t.value)==null?void 0:a.radio)&&$.success(`选中 id 为【${(s=t.value)==null?void 0:s.radio}】的数据`)});const o=async a=>{var s;await G(H,{id:[a.id]},`删除【${a.username}】用户`),(s=t.value)==null||s.getTableList()},u=w(null),g=(a,s={})=>{var d,h;const c={title:a,isView:a==="查看",row:{...s},api:a==="新增"?M:a==="编辑"?P:void 0,getTableList:(d=t.value)==null?void 0:d.getTableList};(h=u.value)==null||h.acceptParams(c)};return(a,s)=>{const c=x("el-button");return _(),v("div",re,[i(j,{title:"部门列表(多选)",multiple:"",label:"name","request-api":N(B),"default-value":r.departmentId,onChange:y},null,8,["request-api","default-value"]),n("div",ne,[n("div",ue,[i(se,{data:l,"default-values":b.value,onChange:e},null,8,["data","default-values"])]),i(A,{ref_key:"proTable",ref:t,"highlight-current-row":"",columns:f,"request-api":N(E),"search-label-width":100,"search-label-position":"right","init-param":Object.assign(r,b.value)},{tableHeader:p(()=>[i(c,{type:"primary",onClick:s[0]||(s[0]=d=>g("新增"))},{default:p(()=>[ie,m("  新增用户 ")]),_:1}),i(c,{type:"primary",plain:"",onClick:k},{default:p(()=>[oe,m("  选中第四行 ")]),_:1})]),operation:p(d=>[i(c,{type:"primary",link:"",onClick:h=>g("查看",d.row)},{default:p(()=>[ce,m("  查看 ")]),_:2},1032,["onClick"]),i(c,{type:"primary",link:"",onClick:h=>g("编辑",d.row)},{default:p(()=>[de,m("  编辑 ")]),_:2},1032,["onClick"]),i(c,{type:"primary",link:"",onClick:h=>o(d.row)},{default:p(()=>[pe,m("  删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns","request-api","init-param"]),i(O,{ref_key:"drawerRef",ref:u},null,512),i(K,{ref:"dialogRef"},null,512)])])}}});export{ge as default};
