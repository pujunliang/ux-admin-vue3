import{g as S,a as N,b as T,_ as L,u as p,d}from"./utils-8a0e21cb.js";import{d as b,aM as R,aK as D,r as _,o as $,c as E,b as o,w as n,e as u,a as i,t as V,u as A,bJ as m}from"./index-56d49eb9.js";import"./sortable.esm-563a259b.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"table-box"},M=i("i",{class:"ri-checkbox-multiple-line"},null,-1),U=i("i",{class:"ri-checkbox-circle-line"},null,-1),q=i("i",{class:"ri-delete-bin-line"},null,-1),H={class:"detail"},P=i("i",{class:"ri-refresh-line"},null,-1),j=i("i",{class:"ri-delete-bin-line"},null,-1),G=i("span",{style:{color:"var(--el-color-primary)"}}," 我是插入在表格最后的内容。若表格有合计行，该内容会位于合计行之上。 ",-1),J=b({name:"complexProTable"}),X=b({...J,setup(K){const r=R(),h=D([{type:"selection",width:80},{type:"index",label:"#",width:80},{type:"expand",label:"Expand",width:100},{prop:"base",label:"基本信息",headerRender:e=>o(_("el-button"),{type:"primary",onClick:()=>m.success("我是通过 tsx 语法渲染的表头")},{default:()=>[e.column.label]}),_children:[{prop:"username",label:"用户姓名",width:110},{prop:"user.detail.age",label:"年龄",width:100},{prop:"gender",label:"性别",width:100,enum:S(),fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"details",label:"详细资料",_children:[{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"}]}]},{prop:"status",label:"用户状态",tag:!0,enum:N(),fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"创建时间",width:200},{prop:"operation",label:"操作",fixed:"right",width:230}]),f=()=>{var e,t,a,l,s,c;(a=(e=r.value)==null?void 0:e.element)==null||a.setCurrentRow((t=r.value)==null?void 0:t.tableData[4]),(c=(l=r.value)==null?void 0:l.element)==null||c.toggleRowSelection((s=r.value)==null?void 0:s.tableData[4],!0)},w=e=>{const{columns:t}=e,a=[];return t.forEach((l,s)=>{if(s===0)return a[s]="合计";a[s]="N/A"}),a},y=({rowIndex:e,columnIndex:t})=>{if(t===3)return e%2===0?{rowspan:2,colspan:1}:{rowspan:0,colspan:0}},g=({rowIndex:e})=>e===2?"warning-row":e===6?"success-row":"",k=(e,t)=>{t.property=="radio"||t.property=="operation"||m.success("当前行被点击了！")},v=async e=>{var t;await p(d,{id:[e.id]},`删除【${e.username}】用户`),(t=r.value)==null||t.getTableList()},C=async e=>{var t,a;await p(d,{id:e},"删除所选用户信息"),(t=r.value)==null||t.clearSelection(),(a=r.value)==null||a.getTableList()},x=async e=>{};return(e,t)=>{const a=_("el-button");return $(),E("div",B,[o(L,{ref_key:"proTable",ref:r,title:"用户列表","highlight-current-row":"",columns:h,"request-api":A(T),"row-class-name":g,"span-method":y,"show-summary":!0,"summary-method":w,onRowClick:k},{tableHeader:n(l=>{var s,c;return[o(a,{type:"primary",onClick:(c=(s=r.value)==null?void 0:s.element)==null?void 0:c.toggleAllSelection},{default:n(()=>[M,u("  全选 / 全不选 ")]),_:1},8,["onClick"]),o(a,{type:"primary",plain:"",onClick:f},{default:n(()=>[U,u("  选中第五行 ")]),_:1}),o(a,{type:"danger",plain:"",disabled:!l.isSelected,onClick:F=>C(l.selectedListIds)},{default:n(()=>[q,u("  批量删除用户 ")]),_:2},1032,["disabled","onClick"])]}),expand:n(l=>[i("span",H,V(l.row),1)]),operation:n(l=>[o(a,{type:"primary",link:"",onClick:s=>x(l.row)},{default:n(()=>[P,u("  重置密码 ")]),_:2},1032,["onClick"]),o(a,{type:"primary",link:"",onClick:s=>v(l.row)},{default:n(()=>[j,u("  删除 ")]),_:2},1032,["onClick"])]),append:n(()=>[G]),_:1},8,["columns","request-api"])])}}});export{X as default};
