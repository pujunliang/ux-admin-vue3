import{bK as M,bL as V,A,aK as D,d as $,bC as E,aM as C,r as H,aQ as O,o as y,c as Y,b as o,w as l,bu as x,h as N,e as c,a as d,t as w,u as v,bJ as T,bM as F,p as J,g as q}from"./index-56d49eb9.js";import{g as z,a as G,u as k,i as K,_ as j,b as Q,d as B,j as W,f as X,h as Z}from"./utils-8a0e21cb.js";import{u as ee,g as te,a as ae,s as se,h as le,I as re,b as ne}from"./render-a551338b.js";import{_ as oe}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-495e4281.js";import{_ as ie}from"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-563a259b.js";const ce=()=>{const u=M(),m=V().authButtonListGet[u.name]||[];return{BUTTONS:A(()=>{let n={};return m.forEach(_=>n[_]=!0),n})}},ue=u=>{const{BUTTONS:b}=ce(),m=async n=>{var f;let _=`切换【${n.username}】用户状态`;await k(K,{id:n.id,status:n.status==1?0:1},_),(f=u.value)==null||f.getTableList()};return{columns:D([{type:"selection",fixed:"left",width:45},{type:"sort",label:"Sort",width:80},{type:"expand",label:"展开",width:60},{prop:"username",label:"用户姓名",width:120,search:{el:"input",tooltip:"我是搜索提示"},render:ee},{prop:"gender",label:"性别",enum:z(),search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"},render:te},{prop:"age",label:"年龄",search:{render:ae}},{prop:"idCard",label:"身份证号",search:{el:"input"},width:180,align:"left"},{prop:"email",label:"邮箱",width:220,align:"left"},{prop:"address",label:"居住地址",width:220,align:"left"},{prop:"status",label:"用户状态",enum:G(),search:{el:"tree-select",props:{filterable:!0}},fieldNames:{label:"userLabel",value:"userStatus"},width:120,render:n=>se(n,b,m)},{prop:"createTime",label:"创建时间",headerRender:le,width:180,search:{el:"date-picker",span:1,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:240}])}},p=u=>(J("data-v-c05f4937"),u=u(),q(),u),de={class:"table-box"},pe=p(()=>d("i",{class:"ri-add-line"},null,-1)),me=p(()=>d("i",{class:"ri-download-line"},null,-1)),_e=p(()=>d("i",{class:"ri-external-link-line"},null,-1)),be=p(()=>d("i",{class:"ri-delete-bin-line"},null,-1)),fe={class:"detail"},he=p(()=>d("i",{class:"ri-eye-line"},null,-1)),ge=p(()=>d("i",{class:"ri-edit-2-line"},null,-1)),ye=p(()=>d("i",{class:"ri-delete-bin-line"},null,-1)),we=$({name:"useProTable"}),ve=$({...we,setup(u){const b=E(),m=()=>{b.push(`/proTable/useProTable/detail/${Math.random().toFixed(3)}?params=detail-page`)},r=C(),{columns:n}=ue(r),_=D({type:1}),f=t=>({list:t.list,total:t.total,pageNum:t.pageNum,pageSize:t.pageSize}),L=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),delete e.createTime,Q(e)},R=({newIndex:t,oldIndex:e})=>{var a;(a=r.value)==null||a.tableData,T.success("修改列表排序成功")},U=async t=>{var e;await k(B,{id:[t.id]},`删除【${t.username}】用户`),(e=r.value)==null||e.getTableList()},I=async t=>{var e,a;await k(B,{id:t},"删除所选用户信息"),(e=r.value)==null||e.clearSelection(),(a=r.value)==null||a.getTableList()},P=async()=>{var a;let t="用户列表",e=(a=r.value)==null?void 0:a.searchParam;F.confirm("确认导出用户数据?","温馨提示",{type:"warning",autofocus:!1}).then(()=>ne(W,t,e))},S=C(null),g=(t,e={})=>{var s,i;let a=t==="新增"?X:t==="编辑"?Z:void 0;const h={title:t,isView:t==="查看",row:{...e},api:a,getTableList:(s=r.value)==null?void 0:s.getTableList};(i=S.value)==null||i.acceptParams(h)};return(t,e)=>{const a=H("el-button"),h=O("auth");return y(),Y("div",de,[o(j,{ref_key:"proTable",ref:r,columns:v(n),"request-api":L,"init-param":_,"data-callback":f,"search-label-width":100,"search-label-position":"right",onDargSort:R},{tableHeader:l(s=>[x((y(),N(a,{type:"primary",onClick:e[0]||(e[0]=i=>g("新增"))},{default:l(()=>[pe,c("  新增用户 ")]),_:1})),[[h,"add"]]),x((y(),N(a,{type:"primary",plain:"",onClick:P},{default:l(()=>[me,c("  导出用户数据 ")]),_:1})),[[h,"export"]]),o(a,{type:"primary",plain:"",onClick:m},{default:l(()=>[_e,c("  跳转详情页面 ")]),_:1}),o(a,{type:"danger",plain:"",disabled:!s.isSelected,onClick:i=>I(s.selectedListIds)},{default:l(()=>[be,c("  批量删除用户 ")]),_:2},1032,["disabled","onClick"])]),expand:l(s=>[d("span",fe,w(s.row),1)]),usernameHeader:l(s=>[o(a,{type:"primary",onClick:e[1]||(e[1]=i=>v(T).success("我是通过作用域插槽渲染的表头"))},{default:l(()=>[c(w(s.column.label),1)]),_:2},1024)]),createTime:l(s=>[o(a,{type:"primary",link:"",onClick:e[2]||(e[2]=i=>v(T).success("我是通过作用域插槽渲染的内容"))},{default:l(()=>[c(w(s.row.createTime),1)]),_:2},1024)]),operation:l(s=>[o(a,{type:"primary",link:"",onClick:i=>g("查看",s.row)},{default:l(()=>[he,c("  查看 ")]),_:2},1032,["onClick"]),o(a,{type:"primary",link:"",onClick:i=>g("编辑",s.row)},{default:l(()=>[ge,c("  编辑 ")]),_:2},1032,["onClick"]),o(a,{type:"primary",link:"",onClick:i=>U(s.row)},{default:l(()=>[ye,c("  删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns","init-param"]),o(oe,{ref_key:"drawerRef",ref:S},null,512),o(re,{ref:"dialogRef"},null,512)])}}});const Be=ie(ve,[["__scopeId","data-v-c05f4937"]]);export{Be as default};
